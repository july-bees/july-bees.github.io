(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-00ee"],{"5ZFu":function(e,t,a){},GcbA:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a("gDS+"),n=a.n(r),i=a("EJiy"),l=a.n(i);function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e,t){if(null!==e&&void 0!==e)if("object"!==(void 0===e?"undefined":l()(e))&&(e=[e]),s(e))for(var a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function u(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function c(e,t){if(!t)return e;var a=[];o(t,function(e,t){null!==e&&void 0!==e&&(s(e)?t+="[]":e=[e],o(e,function(e){!function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?function(e){return null!==e&&"object"===(void 0===e?"undefined":l()(e))}(e)&&(e=n()(e)):e=e.toISOString(),a.push(u(t)+"="+u(e))}))});var r=a.join("&");if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},HejF:function(e,t,a){"use strict";t.a={baseURL:"https://e--delivery-dev.chinacloudsites.cn/api"}},TCds:function(e,t,a){"use strict";a.r(t);var r={name:"TaobaoTradeQuery",components:{TradeQuery:a("oOtu").a}},n=a("KHd+"),i=Object(n.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("trade-query",{attrs:{"default-platform":"Taobao"}})},[],!1,null,null,null);i.options.__file="list.vue";t.default=i.exports},ZySA:function(e,t,a){"use strict";var r=a("P2sY"),n=a.n(r),i=(a("jUE0"),{bind:function(e,t){e.addEventListener("click",function(a){var r=n()({},t.value),i=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var s=l.getBoundingClientRect(),o=l.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",l.appendChild(o)),i.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(a.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(a.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=i.color,o.className="waves-ripple z-active",!1}},!1)}}),l=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(l)),i.install=l;t.a=i},jUE0:function(e,t,a){},oOtu:function(e,t,a){"use strict";var r=a("OyzN"),n=a.n(r),i=a("JGVM"),l=a("xA6U"),s=a("ZySA"),o=a("tGfh"),u=a("7Qib"),c={name:"TradeQuery",directives:{waves:s.a},props:{defaultPlatform:{default:"",type:String},isAdminMode:{default:!1,type:Boolean}},data:function(){return{allPlatforms:[{value:"Taobao",label:"淘宝"},{value:"JD",label:"京东"},{value:"PDD",label:"拼多多"}],allStatus:["发货成功","等待发货"],allShops:[],queryPickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date((new Date).setHours(23,59,59));e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5);var a=new Date(t.toDateString()),r=new Date(t.setHours(23,59,59));e.$emit("pick",[a,r])}},{text:"最近一周",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5);var a=new Date(t.toDateString()),r=new Date((new Date).setHours(23,59,59));e.$emit("pick",[a,r])}},{text:"当月",onClick:function(e){var t=new Date;t.setDate(1),t.setHours(0,0,0);var a=new Date;a.setHours(23,59,59),e.$emit("pick",[t,a])}},{text:"上个月",onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1),t.setDate(1),t.setHours(0,0,0);var a=new Date;a.setDate(0),a.setHours(23,59,59),e.$emit("pick",[t,a])}}]},platform:this.defaultPlatform,query:{tradeId:"",logisticsOrderId:"",buyerNick:"",userName:"",shopName:"",status:"",excludedStatus:"",period:[new Date((new Date).toDateString()),new Date((new Date).setHours(23,59,59))],page:1,limit:20},loading:!1,trades:[],size:0,total:0,lastQuery:null}},computed:{downloadLink:function(){return this.lastQuery?Object(o.a)(this.lastQuery,this.isAdminMode):""}},created:function(){this.fetch(this.query),this.fetchAllShops()},methods:{fetchAllShops:function(){var e=this;return Object(l.d)(this.isAdminMode).then(function(t){0!==(t=t.data).errorCode&&e.$message.error(t.errorMessage),e.allShops=t.items})},fetch:function(e){var t=this,a=Object(u.a)(e);return a.platform=this.platform,n()(a).forEach(function(e){a[e]||delete a[e]}),a.period&&a.period.length>0&&(a.from=a.period[0],a.to=a.period[1],delete a.period),"发货成功"===a.status&&(a.status="Deliveried"),"等待发货"===a.status&&(delete a.status,a.excludedStatus="Deliveried"),this.lastQuery=a,this.loading=!0,Object(i.b)(a,this.isAdminMode).then(function(e){t.loading=!1;var a=e.data;0!==a.errorCode&&t.$message.error(a.errorMessage),t.size=a.size,t.total=a.total,t.trades=a.items;var r=(a.page-1)*a.limit;r<0&&(r=0),t.trades.forEach(function(e,t){e.index=r+t+1})})},queryByTradeId:function(){this.fetch({tradeId:this.tradeId})},queryByLogisticsOrderId:function(){this.fetch({logisticsOrderId:this.logisticsOrderId})},queryByBuyerNick:function(){this.fetch({buyerNick:this.buyerNick})},queryByFilter:function(){this.query.page=1,this.fetch(this.query)},queryShopNameSearch:function(e,t){for(var a=[],r=0;r<this.allShops.length&&a.length<=5;r++)e&&-1===this.allShops[r].indexOf(e)||a.push(this.allShops[r]);return t(a.map(function(e){return{value:e}}))},handleSizeChange:function(e){this.query.limit=e,this.loading=!0,this.fetch(this.query)},handleCurrentChange:function(e){this.query.page=e,this.loading=!0,this.fetch(this.query)}}},d=(a("vNGi"),a("KHd+")),f=Object(d.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.isAdminMode?a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:20,sm:22,md:22}},[a("div",{staticClass:"filter-container"},[a("label",{staticClass:"filter-item"},[e._v("平台")]),e._v(" "),a("el-radio-group",{staticClass:"filter-item",model:{value:e.platform,callback:function(t){e.platform=t},expression:"platform"}},[a("el-radio",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:"Taobao"}},[e._v("淘宝")]),e._v(" "),a("el-radio",{attrs:{label:"JD"}},[e._v("京东")]),e._v(" "),a("el-radio",{attrs:{label:"PDD"}},[e._v("拼多多")])],1)],1)])],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:20,sm:22,md:22}},[a("div",{staticClass:"filter-container"},[a("label",{staticClass:"filter-item"},[e._v("订单编号")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.query.tradeId,callback:function(t){e.$set(e.query,"tradeId",t)},expression:"query.tradeId"}}),e._v(" "),a("label",{staticClass:"filter-item"},[e._v("物流单号")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.query.logisticsOrderId,callback:function(t){e.$set(e.query,"logisticsOrderId",t)},expression:"query.logisticsOrderId"}}),e._v(" "),a("label",{staticClass:"filter-item"},[e._v("买家会员名")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.query.buyerNick,callback:function(t){e.$set(e.query,"buyerNick",t)},expression:"query.buyerNick"}})],1)])],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",[a("div",{staticClass:"filter-container"},[e.isAdminMode?a("label",{staticClass:"filter-item"},[e._v("用户名")]):e._e(),e._v(" "),e.isAdminMode?a("el-input",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{clearable:"",placeholder:"默认: 全部用户"},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}}):e._e(),e._v(" "),a("label",{staticClass:"filter-item"},[e._v("起止时间")]),e._v(" "),a("el-date-picker",{staticClass:"filter-item",attrs:{"picker-options":e.queryPickerOptions,"default-time":["00:00:00","23:59:59"],type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.query.period,callback:function(t){e.$set(e.query,"period",t)},expression:"query.period"}}),e._v(" "),a("label",{staticClass:"filter-item"},[e._v("店铺")]),e._v(" "),a("el-autocomplete",{staticClass:"filter-item",attrs:{"fetch-suggestions":e.queryShopNameSearch,placeholder:"默认: 全部",clearable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[a("div",[e._v(e._s(r.value))])]}}]),model:{value:e.query.shopName,callback:function(t){e.$set(e.query,"shopName",t)},expression:"query.shopName"}}),e._v(" "),a("label",{staticClass:"filter-item"},[e._v("状态")]),e._v(" "),a("el-select",{staticClass:"filter-item",model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("el-option",{key:"全部",attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.allStatus,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})],2)],1)]),e._v(" "),a("el-col",[a("div",{staticClass:"filter-container"},[a("label"),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.loading,type:"primary",icon:"el-icon-search"},on:{click:e.queryByFilter}},[e._v("查询")]),e._v(" "),a("span",{staticClass:"el-button el-button--primary filter-item",attrs:{icon:"el-icon-download"}},[a("a",{attrs:{href:e.downloadLink,target:"_blank"}},[e._v("下载")])])],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.trades,border:"",fit:"",stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",fixed:"",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.index))])]}}])}),e._v(" "),e.isAdminMode?a("el-table-column",{attrs:{label:"用户",fixed:"",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userName))])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"订单编号",fixed:"",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.tradeNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物流单号",fixed:"",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.logisticsOrderId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物流公司",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.logisticsName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"错误",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.error))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物流状态",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.status))])]}}])}),e._v(" "),e.isAdminMode?a("el-table-column",{attrs:{label:"重量","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.weight))])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"店铺","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.shopName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"宝贝","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.originGoodsName,placement:"left",effect:"light"}},[a("span",{staticClass:"nowrap-text"},[e._v(e._s(t.row.originGoodsName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"买家会员名",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.buyerNick))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收货人",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.buyerName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收货地址","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.buyerFullAddress,placement:"left",effect:"light"}},[a("span",{staticClass:"nowrap-text"},[e._v(e._s(t.row.buyerFullAddress))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系手机",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.buyerPhone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.createdAt)))])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{"current-page":e.query.page,"page-sizes":[20,50,100,200],"page-size":e.query.limit,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},[],!1,null,"1723bff0",null);f.options.__file="TradeQuery.vue";t.a=f.exports},tGfh:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"c",function(){return o});a("OyzN");var r=a("HejF"),n=a("GcbA"),i=a("7Qib");function l(e,t){var a=Object(i.a)(e);delete a.page,delete a.limit;var l=r.a.baseURL;return l+=t?"/trade/admin/download":"/trade/download",Object(n.a)(l,a)}function s(e){e["修改后的收货地址"]||(e["修改后的收货地址"]="");var t=e["修改后的收货地址"].split(" ").filter(function(e){return!!e});return 3===t.length&&(t.push(t[2]),t[2]=t[1]),4!==t.length&&(t=e["收货地址"].split(" ").filter(function(e){return!!e})),3===t.length&&(t.push(t[2]),t[2]=t[1]),t[2]&&"null"!==t[2]||(t[2]=t[1]),t}function o(e){if(!/^[0-9\-]+$/.test(e["订单编号"]))return"订单编号只能是数字";var t=function(e){if(4!==e.length)return"收货地址必须为省 市 区 地址四个部分组成";var t=e[0],a=!1;if(["新疆","西藏","海南","青海","内蒙"].forEach(function(e){-1!==t.indexOf(e)&&(a=!0)}),a)return"目前不支持代发包裹的地区包括：新疆 西藏 海南 青海 内蒙";return""}(s(e));return t||(e["买家会员名"]?e["收货人姓名"]?e["联系手机"]?e["店铺名称"]?"":"店铺名称不能为空":"联系手机不能为空":"收货人姓名不能为空":"买家会员名不能为空")}},vNGi:function(e,t,a){"use strict";var r=a("5ZFu");a.n(r).a},xA6U:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"c",function(){return i}),a.d(t,"b",function(){return l}),a.d(t,"f",function(){return s}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return u}),a.d(t,"g",function(){return c});var r=a("t3Un");function n(e){var t=e?"/goods/admin/shops":"/goods/shops";return Object(r.a)({url:t,method:"get"})}function i(e,t){var a=t?"/goods/admin/list":"/goods/list";return Object(r.a)({url:a,method:"get",params:e})}function l(e,t){var a=t?"/goods/admin/create":"/goods/create";return Object(r.a)({url:a,method:"post",data:e})}function s(e,t){var a=t?"/goods/admin/update":"/goods/update";return Object(r.a)({url:a,method:"post",data:e})}function o(e){return Object(r.a)({url:"/goods/admin/approve",method:"post",data:e})}function u(e){return Object(r.a)({url:"/goods/admin/reject",method:"post",data:e})}function c(e){return Object(r.a)({url:"/goods/image",method:"post",data:e})}}}]);